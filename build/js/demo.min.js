!function i(n,s,a){function o(r,e){if(!s[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw new Error("Cannot find module '"+r+"'")}t=s[r]={exports:{}};n[r][0].call(t.exports,function(e){var t=n[r][1][e];return o(t||e)},t,t.exports,i,n,s,a)}return s[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,r){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,r){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":9}],7:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,r){var i=e("@babel/runtime/helpers/typeof").default,n=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":1,"@babel/runtime/helpers/typeof":10}],9:[function(e,r,t){function i(e,t){return r.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.__esModule=!0,r.exports.default=r.exports,i(e,t)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports},{}],10:[function(e,t,r){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],11:[function(e,t,r){"use strict";var i=e("./range"),e=i.SingleRange,i=i.MultiRange;new e(document.querySelector(".js-range")),new i(document.querySelector(".js-multi-range-left"),document.querySelector(".js-multi-range-right"))},{"./range":12}],12:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.SingleRange=r.MultiRange=void 0;var n=i(e("@babel/runtime/helpers/assertThisInitialized")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/defineProperty"));function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,o.default)(r);return t=i?(e=(0,o.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,t)}}var d=function(){function t(e){(0,u.default)(this,t),(0,p.default)(this,"$inputRef",void 0),(0,p.default)(this,"$wrapper",void 0),this.$inputRef=e,this._updateBarStateOnResize("resize","optimizedResize")}return(0,l.default)(t,[{key:"_init",value:function(){}},{key:"_updateBarStateOnResize",value:function(e,t,r){r=r||window;var i=!1;r.addEventListener(e,function(){i||(i=!0,requestAnimationFrame(function(){r.dispatchEvent(new CustomEvent(t)),i=!1}))})}}]),t}(),e=function(){(0,s.default)(r,d);var t=c(r);function r(e){return(0,u.default)(this,r),(e=t.call(this,e))._init(),e}return(0,l.default)(r,[{key:"_init",value:function(){var t=this;this._createWrapper(),this._calcActiveBarSize(this.$inputRef.value),this.$inputRef.addEventListener("input",function(e){t._calcActiveBarSize(e.target.value)}),window.addEventListener("optimizedResize",function(){t._calcActiveBarSize.bind(t,t.$inputRef.value)()})}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$wrapper.classList.add("custom-range");var e=this.$inputRef.parentNode;this.$inputRef.classList.add("custom-range__input");var t=this.$inputRef.cloneNode(),r=document.createElement("div");r.classList.add("custom-range__slider"),r.innerHTML=' <span class="custom-range__bar"><span class="custom-range__active-bar"></span></span>',r.appendChild(t),this.$wrapper.appendChild(r),e.replaceChild(this.$wrapper,this.$inputRef),this.$inputRef=t}},{key:"_calcActiveBarSize",value:function(e){var t=this.$inputRef.dataset.thumbWidth;this.$wrapper.querySelector(".custom-range__active-bar").style.width=(e-this.$inputRef.min)/(this.$inputRef.max-this.$inputRef.min)*(this.$inputRef.offsetWidth-t)+t/2+"px"}}]),r}();r.SingleRange=e;e=function(){(0,s.default)(i,d);var r=c(i);function i(e,t){return(0,u.default)(this,i),e=r.call(this,e),(0,p.default)((0,n.default)(e),"$secondInputRef",void 0),e.$secondInputRef=t,e._init(),e}return(0,l.default)(i,[{key:"_init",value:function(){this._createWrapper(),this._calcLeftHandlersPosition.bind(this)(),this._calcRightHandlersPosition.bind(this)(),this.$inputRef.addEventListener("input",this._calcLeftHandlersPosition.bind(this)),this.$secondInputRef.addEventListener("input",this._calcRightHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcLeftHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcRightHandlersPosition.bind(this))}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$rangeWrapper=document.createElement("div"),this.$wrapper.classList.add("custom-multi-range"),this.$rangeWrapper.classList.add("custom-multi-range__wrapper"),this.$slider=document.createElement("div"),this.$track=document.createElement("div"),this.$thumbLeft=document.createElement("div"),this.$bar=document.createElement("div"),this.$thumbRight=document.createElement("div"),this.$slider.classList.add("custom-multi-range__slider"),this.$track.classList.add("custom-multi-range__track"),this.$bar.classList.add("custom-multi-range__range"),this.$thumbLeft.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-left"),this.$thumbRight.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-right");var e=this.$inputRef.cloneNode(),t=this.$secondInputRef.cloneNode();this.$wrapper.appendChild(this.$rangeWrapper),this.$rangeWrapper.appendChild(e),this.$rangeWrapper.appendChild(t),this.$rangeWrapper.appendChild(this.$slider),this.$slider.appendChild(this.$track),this.$slider.appendChild(this.$bar),this.$slider.appendChild(this.$thumbLeft),this.$slider.appendChild(this.$thumbRight),this.$inputRef.parentNode.replaceChild(this.$wrapper,this.$inputRef),this.$secondInputRef.parentNode.removeChild(this.$secondInputRef),this.$inputRef=e,this.$secondInputRef=t}},{key:"_calcLeftHandlersPosition",value:function(){var e=this.$inputRef;e.value=Math.min(parseInt(e.value),parseInt(this.$secondInputRef.value)-1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbLeft.style.left=t+"px",this.$bar.style.left=t+e.dataset.thumbWidth/2+"px"}},{key:"_calcRightHandlersPosition",value:function(){var e=this.$secondInputRef;e.value=Math.max(parseInt(e.value),parseInt(this.$inputRef.value)+1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbRight.style.left=t+"px",this.$bar.style.right=e.offsetWidth-t-e.dataset.thumbWidth/2+"px"}}]),i}();r.MultiRange=e},{"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/createClass":3,"@babel/runtime/helpers/defineProperty":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}]},{},[11]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhbmdlLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidGFyZ2V0IiwiZGVzY3JpcHRvciIsImtleSIsIm1vZHVsZSIsImV4cG9ydHMiLCJwcm90b1Byb3BzIiwiX2RlZmluZVByb3BlcnRpZXMiLCJDb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsInN0YXRpY1Byb3BzIiwid3JpdGFibGUiLCJfX2VzTW9kdWxlIiwiX3VwZGF0ZUJhclN0YXRlT25SZXNpemUiLCJ2YWx1ZSIsIm9iaiIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCI1IiwicmVxdWlyZSIsInR5cGUiLCJfZ2V0UHJvdG90eXBlT2YiLCJvIiwiNiIsInNldFByb3RvdHlwZU9mIiwiU2luZ2xlUmFuZ2UiLCJydW5uaW5nIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGlzcGF0Y2hFdmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWZhdWx0IiwiOCIsImFzc2VydFRoaXNJbml0aWFsaXplZCIsInNlbGYiLCJjYWxsIiwiVHlwZUVycm9yIiwiLi9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIsIjkiLCJfY3JlYXRlV3JhcHBlciIsInAiLCJfY2FsY0FjdGl2ZUJhclNpemUiLCJfc2V0UHJvdG90eXBlT2YiLCJ3aW5kb3ciLCIxMCIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIiRwYXJlbnROb2RlIiwiJGlucHV0UmVmIiwicGFyZW50Tm9kZSIsIjExIiwiJGNsb25lZE5vZGUiLCIkc2xpZGVyIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJNdWx0aVJhbmdlIiwiJHdyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCIuL3JhbmdlIiwiMTIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZDIiLCJfaW5oZXJpdHMyIiwiX2dldFByb3RvdHlwZU9mMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJSYW5nZSIsIiRpbnB1dCIsIiRmaXJzdElucHV0IiwiX2RlZmluZVByb3BlcnR5MiIsInRoaXMiLCIkc2Vjb25kSW5wdXRSZWYiLCIkc2Vjb25kSW5wdXQiLCJuYW1lIiwiJHJhbmdlV3JhcHBlciIsImFkZCIsImNsYXNzTGlzdCIsIl9zdXBlciIsIiRlbCIsIl9jcmVhdGVDbGFzczIiLCJsZWZ0IiwibWF4IiwibWluIiwiX3RoaXMyIiwiJHRodW1iUmlnaHQiLCJlIl0sIm1hcHBpbmdzIjoiMDZCQUFBQSxPQUFBQyxlQUFBQyxFQUFBQyxFQUFBQyxJQUFBRCxJQVl3QkUsRUFBQUMsUSxnQkFBcEIsT0FMQUMsR0FBQUMsRUFBQUMsRUFBQUMsVUFBQUgsR0FDSkksR0FBQUgsRUFBQUMsRUFBQUUsR0FDQVgsT0FBQUMsZUFBQVEsRUFBQSxZQUFBLENBQ0FHLFVBQUEsSUFFSUgsR0FBb0JKLEVBQUFDLFFBQUFPLFlBQUEsRUFBQVIsRUFBQUMsUUFBQSxRQUFBRCxFQUFBQyxTLHVCQWF4QkQsRUFBQUMsUUFYUSxTQUFLUSxFQUFBQSxFQUF3QkMsR0FRckMsT0FQS1gsS0FBQVksRUFDRGhCLE9BQUFDLGVBQUFlLEVBQUFaLEVBQUEsQ0FDSlcsTUFBQUEsRUFDQUUsWUFBQSxFQUNBQyxjQUFBLEUscUJBR0FGLEdBR0FYLEVBQUFDLFFBQUFPLFlBQUEsRUFBQVIsRUFBQUMsUUFBQSxRQUFBRCxFQUFBQyxTQUVBLElBQUFhLEVBQUEsQ0FBQSxTQUFBQyxFQUFBZixFQUFBQyxHLGNBRVFVLE8sb0hBREpWLFFBQUFPLFlBQUEsRUFBQVIsRUFBd0JnQixRQUFpQixRQUFBaEIsRUFBQUMsUUFDbENnQixFQUFIQyxHQUVBbEIsRUFBQUMsUUFBYWdCLEVBQVlqQixFQUFBQyxRQUFBTyxZQUFBLEVBQUFSLEVBQUFDLFFBQUEsUUFBQUQsRUFBQUMsU0FFakIsSUFBQWtCLEVBQUEsQ0FBQSxTQUFBSixFQUFBZixFQUFBQyxHQUNILElB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QyxTQUFBeUMsS0FBQWhELEksMEJBRWN3RCxTQVlkLEVBQUFDLEVBQUFsRCxTQUFBUCxFQUFBLENBQUEsQ0FDQXRCLElBQUEsUUFDQVcsTUFBQSxXLGlDQUVRMkQsS0FBTVEsbUJBQVdQLEtBQUFBLFVBQWpCNUQsT0FLQTJELEtBQUlVLFVBQ0twRCxpQkFBSixRQUE2QnFELFNBQVVDLEdBRTVDQyxFQUFLQyxtQkFBTEMsRUFBOEJMLE9BQU9yRSxTQUd4QytCLE9BQUFkLGlCQUFBLGtCQUFBLFcsMDBCQTFDc0IwQiIsImZpbGUiOiJkZW1vLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFBhcmVudCBDbGFzcy5cclxuICpcclxuICovXHJcbmNsYXNzIFJhbmdlIHtcclxuICAgICRpbnB1dFJlZjtcclxuICAgICR3cmFwcGVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIHJhbmdlIGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRpbnB1dCAtIEJhc2UgaW5wdXQgb2YgdGhlIGN1c3RvbSByYW5nZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigkaW5wdXQpIHtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZiA9ICRpbnB1dDtcclxuICAgICAgICB0aGlzLl91cGRhdGVCYXJTdGF0ZU9uUmVzaXplKFwicmVzaXplXCIsIFwib3B0aW1pemVkUmVzaXplXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBYnN0cmFjdCBtZXRob2RcclxuICAgICAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXphdGlvbiBzZXJ2aWNlXHJcbiAgICAgKi9cclxuICAgIF9pbml0KCkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIFByb3RlY3RlZCBtZXRob2RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gSnMgZXZlbnRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gQ3VzdG9tIGV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmogLSBFbGVtZW50IHdoaWNoIGNhbGwgdGhlIGV2ZW50LiBEZWZhdWx0OiAqKip3aW5kb3cqKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiBVc2VkIGZvciB1cGRhdGUgcmFuZ2UgY29udHJvbHMgcG9zaXRpb24gb24gcmVzaXplXHJcbiAgICAgKi9cclxuICAgIF91cGRhdGVCYXJTdGF0ZU9uUmVzaXplKHR5cGUsIG5hbWUsIG9iaikge1xyXG4gICAgICAgIG9iaiA9IG9iaiB8fCB3aW5kb3c7XHJcbiAgICAgICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBmdW5jID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KG5hbWUpKTtcclxuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgc2luZ2xlIHJhbmdlLlxyXG4gKiBAZXh0ZW5kcyBSYW5nZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNpbmdsZVJhbmdlIGV4dGVuZHMgUmFuZ2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaW5nbGUgcmFuZ2UgY29uc3RydWN0b3JcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJGlucHV0IC0gQmFzZSBpbnB1dCBvZiB0aGUgY3VzdG9tIHJhbmdlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCRpbnB1dCkge1xyXG4gICAgICAgIHN1cGVyKCRpbnB1dCk7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXphdGlvbiBtZXRob2Qgb2YgdGhlIHNpbmdsZSByYW5nZVxyXG4gICAgICovXHJcbiAgICBfaW5pdCgpIHtcclxuICAgICAgICB0aGlzLl9jcmVhdGVXcmFwcGVyKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY0FjdGl2ZUJhclNpemUodGhpcy4kaW5wdXRSZWYudmFsdWUpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjQWN0aXZlQmFyU2l6ZShlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcHRpbWl6ZWRSZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjQWN0aXZlQmFyU2l6ZS5iaW5kKHRoaXMsIHRoaXMuJGlucHV0UmVmLnZhbHVlKSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciB0aGUgbW92ZSBpbnB1dCBpbnRvIHdyYXBwZXJcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZVdyYXBwZXIoKSB7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLXJhbmdlXCIpO1xyXG4gICAgICAgIGNvbnN0ICRwYXJlbnROb2RlID0gdGhpcy4kaW5wdXRSZWYucGFyZW50Tm9kZTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLXJhbmdlX19pbnB1dFwiKTtcclxuICAgICAgICBjb25zdCAkY2xvbmVkTm9kZSA9IHRoaXMuJGlucHV0UmVmLmNsb25lTm9kZSgpO1xyXG4gICAgICAgIGNvbnN0ICRzbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICRzbGlkZXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1yYW5nZV9fc2xpZGVyXCIpO1xyXG4gICAgICAgICRzbGlkZXIuaW5uZXJIVE1MID0gYCA8c3BhbiBjbGFzcz1cImN1c3RvbS1yYW5nZV9fYmFyXCI+PHNwYW4gY2xhc3M9XCJjdXN0b20tcmFuZ2VfX2FjdGl2ZS1iYXJcIj48L3NwYW4+PC9zcGFuPmA7XHJcbiAgICAgICAgJHNsaWRlci5hcHBlbmRDaGlsZCgkY2xvbmVkTm9kZSk7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlci5hcHBlbmRDaGlsZCgkc2xpZGVyKTtcclxuICAgICAgICAkcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy4kd3JhcHBlciwgdGhpcy4kaW5wdXRSZWYpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmID0gJGNsb25lZE5vZGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgZm9yIGdldCBhY3R1YWwgYWN0aXZlIGJhciBzaXplLlxyXG4gICAgICpcclxuICAgICAqIE5hdGl2ZSBhY3RpdmUgYmFyIGlzIGhpZGRlbiBieSBTaGFkb3dET01cclxuICAgICAqIEBwYXJhbSB7IG51bWJlciB8IHN0cmluZyB9IHZhbHVlIC0gSW5wdXQgY3VycmVudCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBfY2FsY0FjdGl2ZUJhclNpemUodmFsdWUpIHtcclxuICAgICAgICBjb25zdCB0aHVtYldpZHRoID0gdGhpcy4kaW5wdXRSZWYuZGF0YXNldC50aHVtYldpZHRoO1xyXG4gICAgICAgIGNvbnN0ICRiYXIgPSB0aGlzLiR3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tLXJhbmdlX19hY3RpdmUtYmFyXCIpO1xyXG4gICAgICAgICRiYXIuc3R5bGUud2lkdGggPVxyXG4gICAgICAgICAgICAoKHZhbHVlIC0gdGhpcy4kaW5wdXRSZWYubWluKSAvXHJcbiAgICAgICAgICAgICAgICAodGhpcy4kaW5wdXRSZWYubWF4IC0gdGhpcy4kaW5wdXRSZWYubWluKSkgKlxyXG4gICAgICAgICAgICAodGhpcy4kaW5wdXRSZWYub2Zmc2V0V2lkdGggLSB0aHVtYldpZHRoKSArXHJcbiAgICAgICAgICAgIHRodW1iV2lkdGggLyAyICtcclxuICAgICAgICAgICAgXCJweFwiO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBtdWx0aS1yYW5nZS5cclxuICogQGV4dGVuZHMgUmFuZ2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNdWx0aVJhbmdlIGV4dGVuZHMgUmFuZ2Uge1xyXG4gICAgJHNlY29uZElucHV0UmVmO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaW5nbGUgcmFuZ2UgY29uc3RydWN0b3JcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJGZpcnN0SW5wdXQgLSBGaXJzdCBpbnB1dFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHNlY29uZElucHV0IC0gU2Vjb25kIGlucHV0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCRmaXJzdElucHV0LCAkc2Vjb25kSW5wdXQpIHtcclxuICAgICAgICBzdXBlcigkZmlyc3RJbnB1dCk7XHJcbiAgICAgICAgdGhpcy4kc2Vjb25kSW5wdXRSZWYgPSAkc2Vjb25kSW5wdXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXphdGlvbiBtZXRob2Qgb2YgdGhlIG11bHRpLXJhbmdlXHJcbiAgICAgKi9cclxuICAgIF9pbml0KCkge1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZVdyYXBwZXIoKTtcclxuICAgICAgICB0aGlzLl9jYWxjTGVmdEhhbmRsZXJzUG9zaXRpb24uYmluZCh0aGlzKSgpO1xyXG4gICAgICAgIHRoaXMuX2NhbGNSaWdodEhhbmRsZXJzUG9zaXRpb24uYmluZCh0aGlzKSgpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhpcy5fY2FsY0xlZnRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiaW5wdXRcIixcclxuICAgICAgICAgICAgdGhpcy5fY2FsY1JpZ2h0SGFuZGxlcnNQb3NpdGlvbi5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJvcHRpbWl6ZWRSZXNpemVcIixcclxuICAgICAgICAgICAgdGhpcy5fY2FsY0xlZnRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICApO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcIm9wdGltaXplZFJlc2l6ZVwiLFxyXG4gICAgICAgICAgICB0aGlzLl9jYWxjUmlnaHRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciB0aGUgbW92ZSBpbnB1dCdzIGludG8gd3JhcHBlclxyXG4gICAgICovXHJcbiAgICBfY3JlYXRlV3JhcHBlcigpIHtcclxuICAgICAgICB0aGlzLiR3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1tdWx0aS1yYW5nZVwiKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1tdWx0aS1yYW5nZV9fd3JhcHBlclwiKTtcclxuICAgICAgICB0aGlzLiRzbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHRyYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiR0aHVtYkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VfX3NsaWRlclwiKTtcclxuICAgICAgICB0aGlzLiR0cmFjay5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLW11bHRpLXJhbmdlX190cmFja1wiKTtcclxuICAgICAgICB0aGlzLiRiYXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1tdWx0aS1yYW5nZV9fcmFuZ2VcIik7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJMZWZ0LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgIFwiY3VzdG9tLW11bHRpLXJhbmdlX190aHVtYlwiLFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWItbGVmdFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLiR0aHVtYlJpZ2h0LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgIFwiY3VzdG9tLW11bHRpLXJhbmdlX190aHVtYlwiLFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWItcmlnaHRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgJGZpcnN0SW5wdXRDbG9uZSA9IHRoaXMuJGlucHV0UmVmLmNsb25lTm9kZSgpO1xyXG4gICAgICAgIGNvbnN0ICRzZWNvbmRJbnB1dENsb25lID0gdGhpcy4kc2Vjb25kSW5wdXRSZWYuY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLiRyYW5nZVdyYXBwZXIpO1xyXG4gICAgICAgIHRoaXMuJHJhbmdlV3JhcHBlci5hcHBlbmRDaGlsZCgkZmlyc3RJbnB1dENsb25lKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuYXBwZW5kQ2hpbGQoJHNlY29uZElucHV0Q2xvbmUpO1xyXG4gICAgICAgIHRoaXMuJHJhbmdlV3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLiRzbGlkZXIpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiR0cmFjayk7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyLmFwcGVuZENoaWxkKHRoaXMuJGJhcik7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyLmFwcGVuZENoaWxkKHRoaXMuJHRodW1iTGVmdCk7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyLmFwcGVuZENoaWxkKHRoaXMuJHRodW1iUmlnaHQpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMuJHdyYXBwZXIsIHRoaXMuJGlucHV0UmVmKTtcclxuICAgICAgICB0aGlzLiRzZWNvbmRJbnB1dFJlZi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuJHNlY29uZElucHV0UmVmKTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZiA9ICRmaXJzdElucHV0Q2xvbmU7XHJcbiAgICAgICAgdGhpcy4kc2Vjb25kSW5wdXRSZWYgPSAkc2Vjb25kSW5wdXRDbG9uZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBmb3IgZ2V0IGFjdHVhbCBsZWZ0IHRodW1iIHBvc2l0aW9uIGFuZCBhY3RpdmUgYmFyIHN0YXJ0LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX2NhbGNMZWZ0SGFuZGxlcnNQb3NpdGlvbigpIHtcclxuICAgICAgICBjb25zdCAkZWwgPSB0aGlzLiRpbnB1dFJlZjtcclxuICAgICAgICAkZWwudmFsdWUgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgcGFyc2VJbnQoJGVsLnZhbHVlKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy4kc2Vjb25kSW5wdXRSZWYudmFsdWUpIC0gMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGxlZnQgPVxyXG4gICAgICAgICAgICAoKCRlbC52YWx1ZSAtICRlbC5taW4pIC8gKCRlbC5tYXggLSAkZWwubWluKSkgKlxyXG4gICAgICAgICAgICAoJGVsLm9mZnNldFdpZHRoIC0gJGVsLmRhdGFzZXQudGh1bWJXaWR0aCk7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJMZWZ0LnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMuJGJhci5zdHlsZS5sZWZ0ID0gbGVmdCArICRlbC5kYXRhc2V0LnRodW1iV2lkdGggLyAyICsgXCJweFwiO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciBnZXQgYWN0dWFsIHJpZ2h0IHRodW1iIHBvc2l0aW9uIGFuZCBhY3RpdmUgYmFyIGVuZC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9jYWxjUmlnaHRIYW5kbGVyc1Bvc2l0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0ICRlbCA9IHRoaXMuJHNlY29uZElucHV0UmVmO1xyXG4gICAgICAgICRlbC52YWx1ZSA9IE1hdGgubWF4KFxyXG4gICAgICAgICAgICBwYXJzZUludCgkZWwudmFsdWUpLFxyXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLiRpbnB1dFJlZi52YWx1ZSkgKyAxXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgbGVmdCA9XHJcbiAgICAgICAgICAgICgoJGVsLnZhbHVlIC0gJGVsLm1pbikgLyAoJGVsLm1heCAtICRlbC5taW4pKSAqXHJcbiAgICAgICAgICAgICgkZWwub2Zmc2V0V2lkdGggLSAkZWwuZGF0YXNldC50aHVtYldpZHRoKTtcclxuICAgICAgICB0aGlzLiR0aHVtYlJpZ2h0LnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMuJGJhci5zdHlsZS5yaWdodCA9XHJcbiAgICAgICAgICAgICRlbC5vZmZzZXRXaWR0aCAtIGxlZnQgLSAkZWwuZGF0YXNldC50aHVtYldpZHRoIC8gMiArIFwicHhcIjtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiJdfQ==
