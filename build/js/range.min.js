!function i(n,s,a){function o(r,e){if(!s[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw new Error("Cannot find module '"+r+"'")}t=s[r]={exports:{}};n[r][0].call(t.exports,function(e){var t=n[r][1][e];return o(t||e)},t,t.exports,i,n,s,a)}return s[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,r){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,r){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":9}],7:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,r){var i=e("@babel/runtime/helpers/typeof").default,n=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":1,"@babel/runtime/helpers/typeof":10}],9:[function(e,r,t){function i(e,t){return r.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.__esModule=!0,r.exports.default=r.exports,i(e,t)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports},{}],10:[function(e,t,r){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],11:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.SingleRange=r.MultiRange=void 0;var n=i(e("@babel/runtime/helpers/assertThisInitialized")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/defineProperty"));function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,o.default)(r);return t=i?(e=(0,o.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,t)}}var d=function(){function t(e){(0,u.default)(this,t),(0,p.default)(this,"$inputRef",void 0),(0,p.default)(this,"$wrapper",void 0),this.$inputRef=e,this._updateBarStateOnResize("resize","optimizedResize")}return(0,l.default)(t,[{key:"_init",value:function(){}},{key:"_updateBarStateOnResize",value:function(e,t,r){r=r||window;var i=!1;r.addEventListener(e,function(){i||(i=!0,requestAnimationFrame(function(){r.dispatchEvent(new CustomEvent(t)),i=!1}))})}}]),t}(),e=function(){(0,s.default)(r,d);var t=c(r);function r(e){return(0,u.default)(this,r),(e=t.call(this,e))._init(),e}return(0,l.default)(r,[{key:"_init",value:function(){var t=this;this._createWrapper(),this._calcActiveBarSize(this.$inputRef.value),this.$inputRef.addEventListener("input",function(e){t._calcActiveBarSize(e.target.value)}),window.addEventListener("optimizedResize",function(){t._calcActiveBarSize.bind(t,t.$inputRef.value)()})}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$wrapper.classList.add("custom-range");var e=this.$inputRef.parentNode;this.$inputRef.classList.add("custom-range__input");var t=this.$inputRef.cloneNode(),r=document.createElement("div");r.classList.add("custom-range__slider"),r.innerHTML=' <span class="custom-range__bar"><span class="custom-range__active-bar"></span></span>',r.appendChild(t),this.$wrapper.appendChild(r),e.replaceChild(this.$wrapper,this.$inputRef),this.$inputRef=t}},{key:"_calcActiveBarSize",value:function(e){var t=this.$inputRef.dataset.thumbWidth;this.$wrapper.querySelector(".custom-range__active-bar").style.width=(e-this.$inputRef.min)/(this.$inputRef.max-this.$inputRef.min)*(this.$inputRef.offsetWidth-t)+t/2+"px"}}]),r}();r.SingleRange=e;e=function(){(0,s.default)(i,d);var r=c(i);function i(e,t){return(0,u.default)(this,i),e=r.call(this,e),(0,p.default)((0,n.default)(e),"$secondInputRef",void 0),e.$secondInputRef=t,e._init(),e}return(0,l.default)(i,[{key:"_init",value:function(){this._createWrapper(),this._calcLeftHandlersPosition.bind(this)(),this._calcRightHandlersPosition.bind(this)(),this.$inputRef.addEventListener("input",this._calcLeftHandlersPosition.bind(this)),this.$secondInputRef.addEventListener("input",this._calcRightHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcLeftHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcRightHandlersPosition.bind(this))}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$rangeWrapper=document.createElement("div"),this.$wrapper.classList.add("custom-multi-range"),this.$rangeWrapper.classList.add("custom-multi-range__wrapper"),this.$slider=document.createElement("div"),this.$track=document.createElement("div"),this.$thumbLeft=document.createElement("div"),this.$bar=document.createElement("div"),this.$thumbRight=document.createElement("div"),this.$slider.classList.add("custom-multi-range__slider"),this.$track.classList.add("custom-multi-range__track"),this.$bar.classList.add("custom-multi-range__range"),this.$thumbLeft.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-left"),this.$thumbRight.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-right");var e=this.$inputRef.cloneNode(),t=this.$secondInputRef.cloneNode();this.$wrapper.appendChild(this.$rangeWrapper),this.$rangeWrapper.appendChild(e),this.$rangeWrapper.appendChild(t),this.$rangeWrapper.appendChild(this.$slider),this.$slider.appendChild(this.$track),this.$slider.appendChild(this.$bar),this.$slider.appendChild(this.$thumbLeft),this.$slider.appendChild(this.$thumbRight),this.$inputRef.parentNode.replaceChild(this.$wrapper,this.$inputRef),this.$secondInputRef.parentNode.removeChild(this.$secondInputRef),this.$inputRef=e,this.$secondInputRef=t}},{key:"_calcLeftHandlersPosition",value:function(){var e=this.$inputRef;e.value=Math.min(parseInt(e.value),parseInt(this.$secondInputRef.value)-1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbLeft.style.left=t+"px",this.$bar.style.left=t+e.dataset.thumbWidth/2+"px"}},{key:"_calcRightHandlersPosition",value:function(){var e=this.$secondInputRef;e.value=Math.max(parseInt(e.value),parseInt(this.$inputRef.value)+1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbRight.style.left=t+"px",this.$bar.style.right=e.offsetWidth-t-e.dataset.thumbWidth/2+"px"}}]),i}();r.MultiRange=e},{"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/createClass":3,"@babel/runtime/helpers/defineProperty":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}]},{},[11]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhbmdlLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidGFyZ2V0IiwiZGVzY3JpcHRvciIsImtleSIsIm1vZHVsZSIsImV4cG9ydHMiLCJwcm90b1Byb3BzIiwiX2RlZmluZVByb3BlcnRpZXMiLCJDb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsInN0YXRpY1Byb3BzIiwid3JpdGFibGUiLCJfX2VzTW9kdWxlIiwiX3VwZGF0ZUJhclN0YXRlT25SZXNpemUiLCJ2YWx1ZSIsIm9iaiIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCI1IiwicmVxdWlyZSIsInR5cGUiLCJfZ2V0UHJvdG90eXBlT2YiLCJvIiwiUmFuZ2UiLCI2Iiwic2V0UHJvdG90eXBlT2YiLCJTaW5nbGVSYW5nZSIsInJ1bm5pbmciLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCIkaW5wdXQiLCIkaW5wdXRSZWYiLCJkZWZhdWx0IiwiOCIsImFzc2VydFRoaXNJbml0aWFsaXplZCIsInNlbGYiLCJjYWxsIiwiVHlwZUVycm9yIiwiLi9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIsIjkiLCJfY3JlYXRlV3JhcHBlciIsInAiLCJfY2FsY0FjdGl2ZUJhclNpemUiLCJfc2V0UHJvdG90eXBlT2YiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwiMTAiLCJfdHlwZW9mIiwiJHBhcmVudE5vZGUiLCJwYXJlbnROb2RlIiwiMTEiLCIkY2xvbmVkTm9kZSIsIiRzbGlkZXIiLCJhcHBlbmRDaGlsZCIsIk11bHRpUmFuZ2UiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5oZXJpdHMyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2NyZWF0ZUNsYXNzMiIsInF1ZXJ5U2VsZWN0b3IiLCJfZGVmaW5lUHJvcGVydHkyIiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsInNoYW0iLCJQcm94eSIsIkJvb2xlYW4iLCJ2YWx1ZU9mIiwiZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJ0aGlzIiwibmFtZSIsIl9jYWxjTGVmdEhhbmRsZXJzUG9zaXRpb24iLCJhZGQiLCJjbGFzc0xpc3QiLCJfc3VwZXIiLCJ0aHVtYldpZHRoIiwiJHJhbmdlV3JhcHBlciIsIiR0aHVtYkxlZnQiLCJfdGhpcyIsIl9pbml0IiwiJHNlY29uZElucHV0UmVmIiwiJGVsIiwibGVmdCIsIiRiYXIiLCJkYXRhc2V0IiwiX3RoaXMyIl0sIm1hcHBpbmdzIjoiMDZCQUFBQSxPQUFBQyxlQUFBQyxFQUFBQyxFQUFBQyxJQUFBRCxJQVl3QkUsRUFBQUMsUSxnQkFBcEIsT0FMQUMsR0FBQUMsRUFBQUMsRUFBQUMsVUFBQUgsR0FDSkksR0FBQUgsRUFBQUMsRUFBQUUsR0FDQVgsT0FBQUMsZUFBQVEsRUFBQSxZQUFBLENBQ0FHLFVBQUEsSUFFSUgsR0FBb0JKLEVBQUFDLFFBQUFPLFlBQUEsRUFBQVIsRUFBQUMsUUFBQSxRQUFBRCxFQUFBQyxTLHVCQWF4QkQsRUFBQUMsUUFYUSxTQUFLUSxFQUFBQSxFQUF3QkMsR0FRckMsT0FQS1gsS0FBQVksRUFDRGhCLE9BQUFDLGVBQUFlLEVBQUFaLEVBQUEsQ0FDSlcsTUFBQUEsRUFDQUUsWUFBQSxFQUNBQyxjQUFBLEUscUJBR0FGLEdBR0FYLEVBQUFDLFFBQUFPLFlBQUEsRUFBQVIsRUFBQUMsUUFBQSxRQUFBRCxFQUFBQyxTQXpCQSxJQUFBYSxFQUFBLENBQUEsU0FBQUMsRUFBQWYsRUFBQUMsRyxjQUVBVSxPLG9IQURBVixRQUFBTyxZQUFBLEVBQUFSLEVBQUFnQixRQUFBLFFBQUFoQixFQUFBQyxRQUNBZ0IsRUFBQUMsR0FFTUMsRUFBQUEsUUEyQmVGLEVBQVlqQixFQUFBQyxRQUFBTyxZQUFBLEVBQUFSLEVBQUFDLFFBQUEsUUFBQUQsRUFBQUMsU0F2QmpDLElBQUFtQixFQUFBLENBQUEsU0FBQUwsRUFBQWYs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QUFBaEIsRUFBQTFCLFNBQVkyQyxLQWpFWixJQUFBQyxFQUFNQyxFQUFhRixHQWdGbkIsU0FBS0csRUFBQUEsR0EvRGIsT0FrRVEsRUFBQVIsRUFBYWhCLFNBQVlpQixLQUFLUSxJQUM5QkMsRUFBSzNCLEVBQVFDLEtBQUFBLEtBQWJ4QixJQUVBbUQsUUFyRVJDLFMsbUNBSzJDLFdBeUVuQyxJQUFNQyxFQUFNWixLQUtaQSxLQUFJYSxpQkExRVBiLEtBQUFjLG1CQUFBRCxLQUFBckQsVUFBQXVELE9BRUxmLEtBQUF4QyxVQUFBYyxpQkFBQSxRQUFBLFNBQUF3QixHQUNBa0IsRUFBQTVDLG1CQUFBMEIsRUFBQXJFLE9BQUFhLFNBZ0ZBaUMsT0FBQUQsaUJBQUEsa0JBQUEsVyxxREEzRVEsQ0FJQTNDLElBQUEsaUJBUUE0QyxNQUFBQSxXLHdGQXZGZ0J4QixJLGtwQkF5R09vRCIsImZpbGUiOiJyYW5nZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBQYXJlbnQgQ2xhc3MuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBSYW5nZSB7XHJcbiAgICAkaW5wdXRSZWY7XHJcbiAgICAkd3JhcHBlcjtcclxuICAgIC8qKlxyXG4gICAgICogTWFpbiByYW5nZSBjb25zdHJ1Y3RvclxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkaW5wdXQgLSBCYXNlIGlucHV0IG9mIHRoZSBjdXN0b20gcmFuZ2VcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoJGlucHV0KSB7XHJcbiAgICAgICAgdGhpcy4kaW5wdXRSZWYgPSAkaW5wdXQ7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQmFyU3RhdGVPblJlc2l6ZShcInJlc2l6ZVwiLCBcIm9wdGltaXplZFJlc2l6ZVwiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWJzdHJhY3QgbWV0aG9kXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6YXRpb24gc2VydmljZVxyXG4gICAgICovXHJcbiAgICBfaW5pdCgpIHsgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm90ZWN0ZWQgbWV0aG9kXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEpzIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIEN1c3RvbSBldmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb2JqIC0gRWxlbWVudCB3aGljaCBjYWxsIHRoZSBldmVudC4gRGVmYXVsdDogKioqd2luZG93KioqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVXNlZCBmb3IgdXBkYXRlIHJhbmdlIGNvbnRyb2xzIHBvc2l0aW9uIG9uIHJlc2l6ZVxyXG4gICAgICovXHJcbiAgICBfdXBkYXRlQmFyU3RhdGVPblJlc2l6ZSh0eXBlLCBuYW1lLCBvYmopIHtcclxuICAgICAgICBvYmogPSBvYmogfHwgd2luZG93O1xyXG4gICAgICAgIGxldCBydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZnVuYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChuYW1lKSk7XHJcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHNpbmdsZSByYW5nZS5cclxuICogQGV4dGVuZHMgUmFuZ2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaW5nbGVSYW5nZSBleHRlbmRzIFJhbmdlIHtcclxuICAgIC8qKlxyXG4gICAgICogU2luZ2xlIHJhbmdlIGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRpbnB1dCAtIEJhc2UgaW5wdXQgb2YgdGhlIGN1c3RvbSByYW5nZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigkaW5wdXQpIHtcclxuICAgICAgICBzdXBlcigkaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6YXRpb24gbWV0aG9kIG9mIHRoZSBzaW5nbGUgcmFuZ2VcclxuICAgICAqL1xyXG4gICAgX2luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlV3JhcHBlcigpO1xyXG4gICAgICAgIHRoaXMuX2NhbGNBY3RpdmVCYXJTaXplKHRoaXMuJGlucHV0UmVmLnZhbHVlKTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY0FjdGl2ZUJhclNpemUoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY0FjdGl2ZUJhclNpemUuYmluZCh0aGlzLCB0aGlzLiRpbnB1dFJlZi52YWx1ZSkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBmb3IgdGhlIG1vdmUgaW5wdXQgaW50byB3cmFwcGVyXHJcbiAgICAgKi9cclxuICAgIF9jcmVhdGVXcmFwcGVyKCkge1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1yYW5nZVwiKTtcclxuICAgICAgICBjb25zdCAkcGFyZW50Tm9kZSA9IHRoaXMuJGlucHV0UmVmLnBhcmVudE5vZGU7XHJcbiAgICAgICAgdGhpcy4kaW5wdXRSZWYuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1yYW5nZV9faW5wdXRcIik7XHJcbiAgICAgICAgY29uc3QgJGNsb25lZE5vZGUgPSB0aGlzLiRpbnB1dFJlZi5jbG9uZU5vZGUoKTtcclxuICAgICAgICBjb25zdCAkc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAkc2xpZGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tcmFuZ2VfX3NsaWRlclwiKTtcclxuICAgICAgICAkc2xpZGVyLmlubmVySFRNTCA9IGAgPHNwYW4gY2xhc3M9XCJjdXN0b20tcmFuZ2VfX2JhclwiPjxzcGFuIGNsYXNzPVwiY3VzdG9tLXJhbmdlX19hY3RpdmUtYmFyXCI+PC9zcGFuPjwvc3Bhbj5gO1xyXG4gICAgICAgICRzbGlkZXIuYXBwZW5kQ2hpbGQoJGNsb25lZE5vZGUpO1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIuYXBwZW5kQ2hpbGQoJHNsaWRlcik7XHJcbiAgICAgICAgJHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMuJHdyYXBwZXIsIHRoaXMuJGlucHV0UmVmKTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZiA9ICRjbG9uZWROb2RlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciBnZXQgYWN0dWFsIGFjdGl2ZSBiYXIgc2l6ZS5cclxuICAgICAqXHJcbiAgICAgKiBOYXRpdmUgYWN0aXZlIGJhciBpcyBoaWRkZW4gYnkgU2hhZG93RE9NXHJcbiAgICAgKiBAcGFyYW0geyBudW1iZXIgfCBzdHJpbmcgfSB2YWx1ZSAtIElucHV0IGN1cnJlbnQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgX2NhbGNBY3RpdmVCYXJTaXplKHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgdGh1bWJXaWR0aCA9IHRoaXMuJGlucHV0UmVmLmRhdGFzZXQudGh1bWJXaWR0aDtcclxuICAgICAgICBjb25zdCAkYmFyID0gdGhpcy4kd3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbS1yYW5nZV9fYWN0aXZlLWJhclwiKTtcclxuICAgICAgICAkYmFyLnN0eWxlLndpZHRoID1cclxuICAgICAgICAgICAgKCh2YWx1ZSAtIHRoaXMuJGlucHV0UmVmLm1pbikgL1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuJGlucHV0UmVmLm1heCAtIHRoaXMuJGlucHV0UmVmLm1pbikpICpcclxuICAgICAgICAgICAgKHRoaXMuJGlucHV0UmVmLm9mZnNldFdpZHRoIC0gdGh1bWJXaWR0aCkgK1xyXG4gICAgICAgICAgICB0aHVtYldpZHRoIC8gMiArXHJcbiAgICAgICAgICAgIFwicHhcIjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgbXVsdGktcmFuZ2UuXHJcbiAqIEBleHRlbmRzIFJhbmdlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTXVsdGlSYW5nZSBleHRlbmRzIFJhbmdlIHtcclxuICAgICRzZWNvbmRJbnB1dFJlZjtcclxuICAgIC8qKlxyXG4gICAgICogU2luZ2xlIHJhbmdlIGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRmaXJzdElucHV0IC0gRmlyc3QgaW5wdXRcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRzZWNvbmRJbnB1dCAtIFNlY29uZCBpbnB1dFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigkZmlyc3RJbnB1dCwgJHNlY29uZElucHV0KSB7XHJcbiAgICAgICAgc3VwZXIoJGZpcnN0SW5wdXQpO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmID0gJHNlY29uZElucHV0O1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6YXRpb24gbWV0aG9kIG9mIHRoZSBtdWx0aS1yYW5nZVxyXG4gICAgICovXHJcbiAgICBfaW5pdCgpIHtcclxuICAgICAgICB0aGlzLl9jcmVhdGVXcmFwcGVyKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY0xlZnRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcykoKTtcclxuICAgICAgICB0aGlzLl9jYWxjUmlnaHRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcykoKTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImlucHV0XCIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGNMZWZ0SGFuZGxlcnNQb3NpdGlvbi5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLiRzZWNvbmRJbnB1dFJlZi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImlucHV0XCIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGNSaWdodEhhbmRsZXJzUG9zaXRpb24uYmluZCh0aGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwib3B0aW1pemVkUmVzaXplXCIsXHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGNMZWZ0SGFuZGxlcnNQb3NpdGlvbi5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJvcHRpbWl6ZWRSZXNpemVcIixcclxuICAgICAgICAgICAgdGhpcy5fY2FsY1JpZ2h0SGFuZGxlcnNQb3NpdGlvbi5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBmb3IgdGhlIG1vdmUgaW5wdXQncyBpbnRvIHdyYXBwZXJcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZVdyYXBwZXIoKSB7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VcIik7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VfX3dyYXBwZXJcIik7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiR0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiRiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLW11bHRpLXJhbmdlX19zbGlkZXJcIik7XHJcbiAgICAgICAgdGhpcy4kdHJhY2suY2xhc3NMaXN0LmFkZChcImN1c3RvbS1tdWx0aS1yYW5nZV9fdHJhY2tcIik7XHJcbiAgICAgICAgdGhpcy4kYmFyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VfX3JhbmdlXCIpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iTGVmdC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWJcIixcclxuICAgICAgICAgICAgXCJjdXN0b20tbXVsdGktcmFuZ2VfX3RodW1iLWxlZnRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJSaWdodC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWJcIixcclxuICAgICAgICAgICAgXCJjdXN0b20tbXVsdGktcmFuZ2VfX3RodW1iLXJpZ2h0XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0ICRmaXJzdElucHV0Q2xvbmUgPSB0aGlzLiRpbnB1dFJlZi5jbG9uZU5vZGUoKTtcclxuICAgICAgICBjb25zdCAkc2Vjb25kSW5wdXRDbG9uZSA9IHRoaXMuJHNlY29uZElucHV0UmVmLmNsb25lTm9kZSgpO1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy4kcmFuZ2VXcmFwcGVyKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuYXBwZW5kQ2hpbGQoJGZpcnN0SW5wdXRDbG9uZSk7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyLmFwcGVuZENoaWxkKCRzZWNvbmRJbnB1dENsb25lKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy4kc2xpZGVyKTtcclxuICAgICAgICB0aGlzLiRzbGlkZXIuYXBwZW5kQ2hpbGQodGhpcy4kdHJhY2spO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiRiYXIpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiR0aHVtYkxlZnQpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiR0aHVtYlJpZ2h0KTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLiR3cmFwcGVyLCB0aGlzLiRpbnB1dFJlZik7XHJcbiAgICAgICAgdGhpcy4kc2Vjb25kSW5wdXRSZWYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRzZWNvbmRJbnB1dFJlZik7XHJcbiAgICAgICAgdGhpcy4kaW5wdXRSZWYgPSAkZmlyc3RJbnB1dENsb25lO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmID0gJHNlY29uZElucHV0Q2xvbmU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgZm9yIGdldCBhY3R1YWwgbGVmdCB0aHVtYiBwb3NpdGlvbiBhbmQgYWN0aXZlIGJhciBzdGFydC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9jYWxjTGVmdEhhbmRsZXJzUG9zaXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgJGVsID0gdGhpcy4kaW5wdXRSZWY7XHJcbiAgICAgICAgJGVsLnZhbHVlID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgIHBhcnNlSW50KCRlbC52YWx1ZSksXHJcbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuJHNlY29uZElucHV0UmVmLnZhbHVlKSAtIDFcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBsZWZ0ID1cclxuICAgICAgICAgICAgKCgkZWwudmFsdWUgLSAkZWwubWluKSAvICgkZWwubWF4IC0gJGVsLm1pbikpICpcclxuICAgICAgICAgICAgKCRlbC5vZmZzZXRXaWR0aCAtICRlbC5kYXRhc2V0LnRodW1iV2lkdGgpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iTGVmdC5zdHlsZS5sZWZ0ID0gbGVmdCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLiRiYXIuc3R5bGUubGVmdCA9IGxlZnQgKyAkZWwuZGF0YXNldC50aHVtYldpZHRoIC8gMiArIFwicHhcIjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCBmb3IgZ2V0IGFjdHVhbCByaWdodCB0aHVtYiBwb3NpdGlvbiBhbmQgYWN0aXZlIGJhciBlbmQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfY2FsY1JpZ2h0SGFuZGxlcnNQb3NpdGlvbigpIHtcclxuICAgICAgICBjb25zdCAkZWwgPSB0aGlzLiRzZWNvbmRJbnB1dFJlZjtcclxuICAgICAgICAkZWwudmFsdWUgPSBNYXRoLm1heChcclxuICAgICAgICAgICAgcGFyc2VJbnQoJGVsLnZhbHVlKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy4kaW5wdXRSZWYudmFsdWUpICsgMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGxlZnQgPVxyXG4gICAgICAgICAgICAoKCRlbC52YWx1ZSAtICRlbC5taW4pIC8gKCRlbC5tYXggLSAkZWwubWluKSkgKlxyXG4gICAgICAgICAgICAoJGVsLm9mZnNldFdpZHRoIC0gJGVsLmRhdGFzZXQudGh1bWJXaWR0aCk7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJSaWdodC5zdHlsZS5sZWZ0ID0gbGVmdCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLiRiYXIuc3R5bGUucmlnaHQgPVxyXG4gICAgICAgICAgICAkZWwub2Zmc2V0V2lkdGggLSBsZWZ0IC0gJGVsLmRhdGFzZXQudGh1bWJXaWR0aCAvIDIgKyBcInB4XCI7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iXX0=
