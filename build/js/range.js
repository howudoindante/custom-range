!function i(n,s,a){function o(r,e){if(!s[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw new Error("Cannot find module '"+r+"'")}t=s[r]={exports:{}};n[r][0].call(t.exports,function(e){var t=n[r][1][e];return o(t||e)},t,t.exports,i,n,s,a)}return s[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,r){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,r){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":9}],7:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,r){var i=e("@babel/runtime/helpers/typeof").default,n=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":1,"@babel/runtime/helpers/typeof":10}],9:[function(e,r,t){function i(e,t){return r.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.__esModule=!0,r.exports.default=r.exports,i(e,t)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports},{}],10:[function(e,t,r){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],11:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/assertThisInitialized")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/defineProperty"));function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,o.default)(r);return t=i?(e=(0,o.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,t)}}var d=function(){function t(e){(0,u.default)(this,t),(0,p.default)(this,"$inputRef",void 0),(0,p.default)(this,"$wrapper",void 0),this.$inputRef=e,this._updateBarStateOnResize("resize","optimizedResize")}return(0,l.default)(t,[{key:"_init",value:function(){}},{key:"_updateBarStateOnResize",value:function(e,t,r){r=r||window;var i=!1;r.addEventListener(e,function(){i||(i=!0,requestAnimationFrame(function(){r.dispatchEvent(new CustomEvent(t)),i=!1}))})}}]),t}(),i=function(){(0,s.default)(r,d);var t=c(r);function r(e){return(0,u.default)(this,r),(e=t.call(this,e))._init(),e}return(0,l.default)(r,[{key:"_init",value:function(){var t=this;this._createWrapper(),this._calcActiveBarSize(this.$inputRef.value),this.$inputRef.addEventListener("input",function(e){t._calcActiveBarSize(e.target.value)}),window.addEventListener("optimizedResize",function(){t._calcActiveBarSize.bind(t,t.$inputRef.value)()})}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$wrapper.classList.add("custom-range");var e=this.$inputRef.parentNode;this.$inputRef.classList.add("custom-range__input");var t=this.$inputRef.cloneNode(),r=document.createElement("div");r.classList.add("custom-range__slider"),r.innerHTML=' <span class="custom-range__bar"><span class="custom-range__active-bar"></span></span>',r.appendChild(t),this.$wrapper.appendChild(r),e.replaceChild(this.$wrapper,this.$inputRef),this.$inputRef=t}},{key:"_calcActiveBarSize",value:function(e){var t=this.$inputRef.dataset.thumbWidth;this.$wrapper.querySelector(".custom-range__active-bar").style.width=(e-this.$inputRef.min)/(this.$inputRef.max-this.$inputRef.min)*(this.$inputRef.offsetWidth-t)+t/2+"px"}}]),r}(),e=function(){(0,s.default)(i,d);var r=c(i);function i(e,t){return(0,u.default)(this,i),e=r.call(this,e),(0,p.default)((0,n.default)(e),"$secondInputRef",void 0),e.$secondInputRef=t,e._init(),e}return(0,l.default)(i,[{key:"_init",value:function(){this._createWrapper(),this.$inputRef.addEventListener("input",this._calcLeftHandlersPosition.bind(this)),this.$secondInputRef.addEventListener("input",this._calcRightHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcLeftHandlersPosition.bind(this)),window.addEventListener("optimizedResize",this._calcRightHandlersPosition.bind(this))}},{key:"_createWrapper",value:function(){this.$wrapper=document.createElement("div"),this.$rangeWrapper=document.createElement("div"),this.$wrapper.classList.add("custom-multi-range"),this.$rangeWrapper.classList.add("custom-multi-range__wrapper"),this.$slider=document.createElement("div"),this.$track=document.createElement("div"),this.$thumbLeft=document.createElement("div"),this.$bar=document.createElement("div"),this.$thumbRight=document.createElement("div"),this.$slider.classList.add("custom-multi-range__slider"),this.$track.classList.add("custom-multi-range__track"),this.$bar.classList.add("custom-multi-range__range"),this.$thumbLeft.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-left"),this.$thumbRight.classList.add("custom-multi-range__thumb","custom-multi-range__thumb-right");var e=this.$inputRef.cloneNode(),t=this.$secondInputRef.cloneNode();this.$wrapper.appendChild(this.$rangeWrapper),this.$rangeWrapper.appendChild(e),this.$rangeWrapper.appendChild(t),this.$rangeWrapper.appendChild(this.$slider),this.$slider.appendChild(this.$track),this.$slider.appendChild(this.$bar),this.$slider.appendChild(this.$thumbLeft),this.$slider.appendChild(this.$thumbRight),this.$inputRef.parentNode.replaceChild(this.$wrapper,this.$inputRef),this.$secondInputRef.parentNode.removeChild(this.$secondInputRef),this.$inputRef=e,this.$secondInputRef=t}},{key:"_calcLeftHandlersPosition",value:function(){var e=this.$inputRef;e.value=Math.min(parseInt(e.value),parseInt(this.$secondInputRef.value)-1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbLeft.style.left=t+"px",this.$bar.style.left=t+e.dataset.thumbWidth/2+"px"}},{key:"_calcRightHandlersPosition",value:function(){var e=this.$secondInputRef;e.value=Math.max(parseInt(e.value),parseInt(this.$inputRef.value)+1);var t=(e.value-e.min)/(e.max-e.min)*(e.offsetWidth-e.dataset.thumbWidth);this.$thumbRight.style.left=t+"px",this.$bar.style.right=e.offsetWidth-t-e.dataset.thumbWidth/2+"px"}}]),i}();new i(document.querySelector(".js-range")),new e(document.querySelector(".js-multi-range-left"),document.querySelector(".js-multi-range-right"))},{"@babel/runtime/helpers/assertThisInitialized":1,"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/createClass":3,"@babel/runtime/helpers/defineProperty":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}]},{},[11]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhbmdlLmpzIl0sIm5hbWVzIjpbIlJhbmdlIiwiZGVzY3JpcHRvciIsIiRmaXJzdElucHV0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiJGlucHV0UmVmIiwia2V5IiwiQ29uc3RydWN0b3IiLCI0IiwicnVubmluZyIsIm1vZHVsZSIsImV4cG9ydHMiLCJvYmoiLCJ2YWx1ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRpc3BhdGNoRXZlbnQiLCJfX2VzTW9kdWxlIiwiX2dldFByb3RvdHlwZU9mIiwibyIsIjYiLCJyZXF1aXJlIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiZGVmaW5lUHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsIl9jcmVhdGVXcmFwcGVyIiwiX2NhbGNBY3RpdmVCYXJTaXplIiwiNyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJkZWZhdWx0IiwiJHBhcmVudE5vZGUiLCIkY2xvbmVkTm9kZSIsIl90eXBlb2YiLCIkd3JhcHBlciIsImFwcGVuZENoaWxkIiwiYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiY2FsbCIsInRodW1iV2lkdGgiLCIkYmFyIiwiVHlwZUVycm9yIiwiX3NldFByb3RvdHlwZU9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhbGNMZWZ0SGFuZGxlcnNQb3NpdGlvbiIsIndpbmRvdyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5oZXJpdHMyIiwiJHJhbmdlV3JhcHBlciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9nZXRQcm90b3R5cGVPZjIiLCJfY3JlYXRlQ2xhc3MyIiwiX2RlZmluZVByb3BlcnR5MiIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCIkc2xpZGVyIiwiJHNlY29uZElucHV0UmVmIiwiUmVmbGVjdCIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJOZXdUYXJnZXQiLCJTdXBlciIsInJlc3VsdCIsImhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJ0aGlzIiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfY2xhc3NDYWxsQ2hlY2syIiwiJHRyYWNrIiwiX3VwZGF0ZUJhclN0YXRlT25SZXNpemUiLCIkc2Vjb25kSW5wdXRDbG9uZSIsIiRlbCIsInR5cGUiLCJuYW1lIiwiTWF0aCIsImxlZnQiLCJzdHlsZSIsInBhcnNlSW50IiwiJHRodW1iUmlnaHQiXSwibWFwcGluZ3MiOiIwekJBQU1BLEksb0JBR0YsSUFBQUMsRUFBWUMsRUFBQUEsR0FBYUQsRUFBQUUsV0FBQUYsRUFBQUUsYUFBQSxFQUFBRixFQUFBRyxjQUFBLEVBQUEsVUFBQUgsSUFBQUEsRUFBQUksVUFBQSxHQUNyQkMsT0FBS0MsZUFBWUwsRUFBakJELEVBQUFPLElBQUFQLEkscUZBR0pRLEVBQVcsWUFBQSxDLHNFQUtILElBQUFDLEVBQUEsQ0FBQSxTQUFJQyxFQUFTQyxFQUFBQyxHLFVBQ1QsU0FBQUMsRUFBQU4sRUFBQU8sRyxPQUNIUCxLQUFBTSxFLDJCQUNESCxNQUFBQSxFQUNBSyxZQUFBQSxFQUNJRixjQUFJRyxFQUNKTixVQUFBQSxJLG9HQWZhLE8sa0hBQUFDLEVBQUFDLFFBQUFLLFlBQUEsRUFBQU4sRUFBQUMsUUFBQSxRQUFBRCxFQUFBQyxRQUFBTSxFQUFBQyxHQUNyQlIsRUFBQUMsUUFBQU0sRUFBS1osRUFBTE0sUUFBQUssWUFBQSxFQUFBTixFQUFBQyxRQUFBLFFBQUFELEVBQUFDLFNBd0JBLElBQUFRLEVBQUEsQ0FBQSxTQUFBQyxFQUFBVixFQUFBQyxHLHlDQXZCQSxTQUFBVSxFQUFBQyxHLDRHQUNIbEIsT0FBQW1CLGVBQUFGLEVBQUEsWUFBQSxDLG9DQXlCR0csWUFBS0MsQyxRQUNMdEIsVUFBS3VCLEUsbUJBR0p2QixVQUZELElBekJKbUIsR0FBQUksRUFBQUwsRUFBQUMsSSw0RUFnQ0EsSUFBQUssRUFBQSxDQUFBLFNBQWlCUCxFQUFBVixFQUFBQyxHQXhCVEcsRUFBQUEsUUFM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OlsiY2xhc3MgUmFuZ2Uge1xyXG4gICAgJGlucHV0UmVmO1xyXG4gICAgJHdyYXBwZXI7XHJcbiAgICBjb25zdHJ1Y3RvcigkZmlyc3RJbnB1dCkge1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmID0gJGZpcnN0SW5wdXQ7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQmFyU3RhdGVPblJlc2l6ZShcInJlc2l6ZVwiLCBcIm9wdGltaXplZFJlc2l6ZVwiKTtcclxuICAgIH1cclxuICAgIF9pbml0KCkgeyB9XHJcbiAgICBfdXBkYXRlQmFyU3RhdGVPblJlc2l6ZSh0eXBlLCBuYW1lLCBvYmopIHtcclxuICAgICAgICBvYmogPSBvYmogfHwgd2luZG93O1xyXG4gICAgICAgIGxldCBydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZnVuYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9iai5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChuYW1lKSk7XHJcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNpbmdsZVJhbmdlIGV4dGVuZHMgUmFuZ2Uge1xyXG4gICAgY29uc3RydWN0b3IoJHNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoJHNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB9XHJcbiAgICBfaW5pdCgpIHtcclxuICAgICAgICB0aGlzLl9jcmVhdGVXcmFwcGVyKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY0FjdGl2ZUJhclNpemUodGhpcy4kaW5wdXRSZWYudmFsdWUpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjQWN0aXZlQmFyU2l6ZShlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcHRpbWl6ZWRSZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjQWN0aXZlQmFyU2l6ZS5iaW5kKHRoaXMsIHRoaXMuJGlucHV0UmVmLnZhbHVlKSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2NyZWF0ZVdyYXBwZXIoKSB7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLXJhbmdlXCIpO1xyXG4gICAgICAgIGNvbnN0ICRwYXJlbnROb2RlID0gdGhpcy4kaW5wdXRSZWYucGFyZW50Tm9kZTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLXJhbmdlX19pbnB1dFwiKTtcclxuICAgICAgICBjb25zdCAkY2xvbmVkTm9kZSA9IHRoaXMuJGlucHV0UmVmLmNsb25lTm9kZSgpO1xyXG4gICAgICAgIGNvbnN0ICRzbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICRzbGlkZXIuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1yYW5nZV9fc2xpZGVyXCIpO1xyXG4gICAgICAgICRzbGlkZXIuaW5uZXJIVE1MID0gYCA8c3BhbiBjbGFzcz1cImN1c3RvbS1yYW5nZV9fYmFyXCI+PHNwYW4gY2xhc3M9XCJjdXN0b20tcmFuZ2VfX2FjdGl2ZS1iYXJcIj48L3NwYW4+PC9zcGFuPmA7XHJcbiAgICAgICAgJHNsaWRlci5hcHBlbmRDaGlsZCgkY2xvbmVkTm9kZSk7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlci5hcHBlbmRDaGlsZCgkc2xpZGVyKTtcclxuICAgICAgICAkcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy4kd3JhcHBlciwgdGhpcy4kaW5wdXRSZWYpO1xyXG4gICAgICAgIHRoaXMuJGlucHV0UmVmID0gJGNsb25lZE5vZGU7XHJcbiAgICB9XHJcbiAgICBfY2FsY0FjdGl2ZUJhclNpemUodmFsdWUpIHtcclxuICAgICAgICBjb25zdCB0aHVtYldpZHRoID0gdGhpcy4kaW5wdXRSZWYuZGF0YXNldC50aHVtYldpZHRoO1xyXG4gICAgICAgIGNvbnN0ICRiYXIgPSB0aGlzLiR3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tLXJhbmdlX19hY3RpdmUtYmFyXCIpO1xyXG4gICAgICAgICRiYXIuc3R5bGUud2lkdGggPVxyXG4gICAgICAgICAgICAoKHZhbHVlIC0gdGhpcy4kaW5wdXRSZWYubWluKSAvXHJcbiAgICAgICAgICAgICAgICAodGhpcy4kaW5wdXRSZWYubWF4IC0gdGhpcy4kaW5wdXRSZWYubWluKSkgKlxyXG4gICAgICAgICAgICAodGhpcy4kaW5wdXRSZWYub2Zmc2V0V2lkdGggLSB0aHVtYldpZHRoKSArXHJcbiAgICAgICAgICAgIHRodW1iV2lkdGggLyAyICtcclxuICAgICAgICAgICAgXCJweFwiO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIE11bHRpUmFuZ2UgZXh0ZW5kcyBSYW5nZSB7XHJcbiAgICAkc2Vjb25kSW5wdXRSZWY7XHJcbiAgICBjb25zdHJ1Y3RvcigkZmlyc3RJbnB1dCwgJHNlY29uZElucHV0KSB7XHJcbiAgICAgICAgc3VwZXIoJGZpcnN0SW5wdXQpO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmID0gJHNlY29uZElucHV0O1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgIH1cclxuICAgIF9pbml0KCkge1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZVdyYXBwZXIoKTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5fY2FsY0xlZnRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLl9jYWxjUmlnaHRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsIHRoaXMuX2NhbGNMZWZ0SGFuZGxlcnNQb3NpdGlvbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9wdGltaXplZFJlc2l6ZVwiLCB0aGlzLl9jYWxjUmlnaHRIYW5kbGVyc1Bvc2l0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgX2NyZWF0ZVdyYXBwZXIoKSB7XHJcbiAgICAgICAgdGhpcy4kd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VcIik7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VfX3dyYXBwZXJcIik7XHJcbiAgICAgICAgdGhpcy4kc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiR0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLiRiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tLW11bHRpLXJhbmdlX19zbGlkZXJcIik7XHJcbiAgICAgICAgdGhpcy4kdHJhY2suY2xhc3NMaXN0LmFkZChcImN1c3RvbS1tdWx0aS1yYW5nZV9fdHJhY2tcIik7XHJcbiAgICAgICAgdGhpcy4kYmFyLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tbXVsdGktcmFuZ2VfX3JhbmdlXCIpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iTGVmdC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWJcIixcclxuICAgICAgICAgICAgXCJjdXN0b20tbXVsdGktcmFuZ2VfX3RodW1iLWxlZnRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJSaWdodC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcImN1c3RvbS1tdWx0aS1yYW5nZV9fdGh1bWJcIixcclxuICAgICAgICAgICAgXCJjdXN0b20tbXVsdGktcmFuZ2VfX3RodW1iLXJpZ2h0XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0ICRmaXJzdElucHV0Q2xvbmUgPSB0aGlzLiRpbnB1dFJlZi5jbG9uZU5vZGUoKTtcclxuICAgICAgICBjb25zdCAkc2Vjb25kSW5wdXRDbG9uZSA9IHRoaXMuJHNlY29uZElucHV0UmVmLmNsb25lTm9kZSgpO1xyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy4kcmFuZ2VXcmFwcGVyKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuYXBwZW5kQ2hpbGQoJGZpcnN0SW5wdXRDbG9uZSk7XHJcbiAgICAgICAgdGhpcy4kcmFuZ2VXcmFwcGVyLmFwcGVuZENoaWxkKCRzZWNvbmRJbnB1dENsb25lKTtcclxuICAgICAgICB0aGlzLiRyYW5nZVdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy4kc2xpZGVyKTtcclxuICAgICAgICB0aGlzLiRzbGlkZXIuYXBwZW5kQ2hpbGQodGhpcy4kdHJhY2spO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiRiYXIpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiR0aHVtYkxlZnQpO1xyXG4gICAgICAgIHRoaXMuJHNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLiR0aHVtYlJpZ2h0KTtcclxuICAgICAgICB0aGlzLiRpbnB1dFJlZi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLiR3cmFwcGVyLCB0aGlzLiRpbnB1dFJlZik7XHJcbiAgICAgICAgdGhpcy4kc2Vjb25kSW5wdXRSZWYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRzZWNvbmRJbnB1dFJlZik7XHJcbiAgICAgICAgdGhpcy4kaW5wdXRSZWYgPSAkZmlyc3RJbnB1dENsb25lO1xyXG4gICAgICAgIHRoaXMuJHNlY29uZElucHV0UmVmID0gJHNlY29uZElucHV0Q2xvbmU7XHJcbiAgICB9XHJcbiAgICBfY2FsY0xlZnRIYW5kbGVyc1Bvc2l0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0ICRlbCA9IHRoaXMuJGlucHV0UmVmO1xyXG4gICAgICAgICRlbC52YWx1ZSA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICBwYXJzZUludCgkZWwudmFsdWUpLFxyXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLiRzZWNvbmRJbnB1dFJlZi52YWx1ZSkgLSAxXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgbGVmdCA9XHJcbiAgICAgICAgICAgICgoJGVsLnZhbHVlIC0gJGVsLm1pbikgLyAoJGVsLm1heCAtICRlbC5taW4pKSAqXHJcbiAgICAgICAgICAgICgkZWwub2Zmc2V0V2lkdGggLSAkZWwuZGF0YXNldC50aHVtYldpZHRoKTtcclxuICAgICAgICB0aGlzLiR0aHVtYkxlZnQuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy4kYmFyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgJGVsLmRhdGFzZXQudGh1bWJXaWR0aCAvIDIgKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgICBfY2FsY1JpZ2h0SGFuZGxlcnNQb3NpdGlvbigpIHtcclxuICAgICAgICBjb25zdCAkZWwgPSB0aGlzLiRzZWNvbmRJbnB1dFJlZjtcclxuICAgICAgICAkZWwudmFsdWUgPSBNYXRoLm1heChcclxuICAgICAgICAgICAgcGFyc2VJbnQoJGVsLnZhbHVlKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy4kaW5wdXRSZWYudmFsdWUpICsgMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGxlZnQgPVxyXG4gICAgICAgICAgICAoKCRlbC52YWx1ZSAtICRlbC5taW4pIC8gKCRlbC5tYXggLSAkZWwubWluKSkgKlxyXG4gICAgICAgICAgICAoJGVsLm9mZnNldFdpZHRoIC0gJGVsLmRhdGFzZXQudGh1bWJXaWR0aCk7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJSaWdodC5zdHlsZS5sZWZ0ID0gbGVmdCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLiRiYXIuc3R5bGUucmlnaHQgPVxyXG4gICAgICAgICAgICAkZWwub2Zmc2V0V2lkdGggLSBsZWZ0IC0gJGVsLmRhdGFzZXQudGh1bWJXaWR0aCAvIDIgKyBcInB4XCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHJhbmdlID0gbmV3IFNpbmdsZVJhbmdlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtcmFuZ2VcIikpO1xyXG5jb25zdCByYW5nZTEgPSBuZXcgTXVsdGlSYW5nZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLW11bHRpLXJhbmdlLWxlZnRcIiksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtbXVsdGktcmFuZ2UtcmlnaHRcIikpO1xyXG4iXX0=
